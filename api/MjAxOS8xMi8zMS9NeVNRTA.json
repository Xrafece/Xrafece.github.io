{"title":"MySQL","date":"2019-12-31T06:43:00.000Z","link":"2019/12/31/MySQL","tags":["MySQL"],"updated":"2019-12-31T06:48:24.881Z","content":"<h2 id=\"常用SQL语句\">常用SQL语句<a href=\"2019/12/31/MySQL#常用SQL语句\"></a></h2><p><strong>注释</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#单行注释</span><br><span class=\"line\"></span><br><span class=\"line\">-- 单行注释</span><br><span class=\"line\"></span><br><span class=\"line\">/*多行注释</span><br><span class=\"line\">  多行注释</span><br><span class=\"line\">*/</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"数据库\">数据库<a href=\"2019/12/31/MySQL#数据库\"></a></h3><h4 id=\"创建数据库\">创建数据库<a href=\"2019/12/31/MySQL#创建数据库\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create database [if not exists] database_name [default] character set [=] charset_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create schema [if not exists] db_name [default] character set [=] charset_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE (DATABASE|SCHEMA) [IF NOT EXISTS] db_name [DEFAULT] CHARACTER SET [=] charset_name;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"删除数据库\">删除数据库<a href=\"2019/12/31/MySQL#删除数据库\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop database database_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP DATABASE db_name;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"查看数据库\">查看数据库<a href=\"2019/12/31/MySQL#查看数据库\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW DATABASES;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"使用数据库\">使用数据库<a href=\"2019/12/31/MySQL#使用数据库\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">use database_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">USE db_name;</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>查看当前使用的数据库</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select database();</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT DATABASE();</span><br></pre></td></tr></table></div></figure>\n\n<p><strong>查看数据库存储引擎</strong></p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show engines;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW ENGINES;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"数据表\">数据表<a href=\"2019/12/31/MySQL#数据表\"></a></h3><h4 id=\"查看数据表\">查看数据表<a href=\"2019/12/31/MySQL#查看数据表\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show tables;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW TABLES;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"创建数据表\">创建数据表<a href=\"2019/12/31/MySQL#创建数据表\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create table [if not exists] table_name(column_name, column_type...);</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE TABLE [IF NOT EXISTS] table_name(column_name, column_type...);</span><br></pre></td></tr></table></div></figure>\n\n<p>创建数据表除了以上SQL语句以外，有时候还会写一些约束条件：</p>\n<ul>\n<li><code>NULL</code>|<code>NOT NULL</code>可以设置字段是否可为空</li>\n<li><code>AUTO_INCREMENT</code>即<code>auto_increment</code>设置字段自增属性（只有整型类型才能设置此属性）。</li>\n<li><code>PRIMARY KEY</code>即<code>primary key</code>设置指定列为主键，可定义多个，用逗号分割。</li>\n<li><code>DEFAULT</code>即<code>default</code>设置字段默认值</li>\n<li><code>COMMENT</code>即<code>comment</code>设置字段注释（字符串）。</li>\n<li><code>ENGINE</code>即<code>engine</code>设置存储引擎</li>\n<li><code>CHARSET</code>即<code>charset</code>设置编码</li>\n</ul>\n<p>实例</p>\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CREATE DATABASE `ssmbuild`;</span><br><span class=\"line\"></span><br><span class=\"line\">USE `ssmbuild`;</span><br><span class=\"line\"></span><br><span class=\"line\">DROP TABLE IF EXISTS `books`;</span><br><span class=\"line\"></span><br><span class=\"line\">CREATE TABLE `books` (</span><br><span class=\"line\">  `bookID` INT(10) NOT NULL AUTO_INCREMENT COMMENT &apos;书id&apos;,</span><br><span class=\"line\">  `bookName` VARCHAR(100) NOT NULL COMMENT &apos;书名&apos;,</span><br><span class=\"line\">  `bookCounts` INT(11) NOT NULL COMMENT &apos;数量&apos;,</span><br><span class=\"line\">  `detail` VARCHAR(200) NOT NULL COMMENT &apos;描述&apos;,</span><br><span class=\"line\">  KEY `bookID` (`bookID`)</span><br><span class=\"line\">) ENGINE=INNODB DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"删除数据表\">删除数据表<a href=\"2019/12/31/MySQL#删除数据表\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drop table table_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DROP TABLE table_name;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"查看数据表结构\">查看数据表结构<a href=\"2019/12/31/MySQL#查看数据表结构\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">desc table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">describe table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">explain table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">show column from table_name;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DESC table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">DESCRIBE table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">EXPLAIN table_name;</span><br><span class=\"line\"></span><br><span class=\"line\">SHOW COLUMN FROM table_name;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"数据操作\">数据操作<a href=\"2019/12/31/MySQL#数据操作\"></a></h3><h4 id=\"新增（插入）数据\">新增（插入）数据<a href=\"2019/12/31/MySQL#新增（插入）数据\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">insert into table_name (field1, field2, ... fieldN)</span><br><span class=\"line\">values (value1, value2, ... valueN);</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INSERT INTO table_name (field1, field2, ... fieldN)</span><br><span class=\"line\">VALUES (value1, value2, ... valueN);</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"修改（新增）数据\">修改（新增）数据<a href=\"2019/12/31/MySQL#修改（新增）数据\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">update table_name set field1 = new_value1, field2 = new_value2 [where Clause];</span><br><span class=\"line\"></span><br><span class=\"line\">#指定字符串批量操作</span><br><span class=\"line\">update table_name set field = replace (field, &apos;old_value&apos;, &apos;new_value&apos;) [where Clause];</span><br><span class=\"line\"></span><br><span class=\"line\">update table_name set column_name = new_value [where Clause];</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">UPDATE table_name SET field1 = new_value1, field2 = new_value2 [WHERE Clause];</span><br><span class=\"line\"></span><br><span class=\"line\">UPDATE table_name SET field = REPLACE (FIELD, &apos;old_value&apos;, &apos;new_value&apos;) [WHERE Clause];</span><br><span class=\"line\"></span><br><span class=\"line\">UPDATE table_name SET column_name = new_value [WHERE Clause];</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"删除数据\">删除数据<a href=\"2019/12/31/MySQL#删除数据\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">delete from table_name [where Clause];</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">DELETE FROM table_name [WHERE Clause];</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"查询数据\">查询数据<a href=\"2019/12/31/MySQL#查询数据\"></a></h4><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select (column_name, column_name, ... ) from table_name [where Clause] [limit N] [offset M];</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"MySQL基本语法要素\">MySQL基本语法要素<a href=\"2019/12/31/MySQL#MySQL基本语法要素\"></a></h2><h3 id=\"字符集和标识符\">字符集和标识符<a href=\"2019/12/31/MySQL#字符集和标识符\"></a></h3><p>MySQL服务器默认的字符集是latin1.</p>\n<p>MySQL中字符序名称遵从命名惯例：</p>\n<p>以字符序对应的字符集名称开头；</p>\n<ul>\n<li>以<code>_ci</code>表示<strong>大小写不敏感</strong></li>\n<li>以_ca表示大小写敏感</li>\n<li>以_bin表示按编码值比较</li>\n</ul>\n<p>结尾。</p>\n<p>例如常用的字符序<code>utf-8_genenral_ci</code>中，字符<code>&#39;a&#39;</code>和<code>&#39;A&#39;</code>等价。</p>\n<p>MySQL的字符集支持可以细化到四个层次</p>\n<ul>\n<li>服务器</li>\n<li>数据库</li>\n<li>数据表</li>\n<li>连接层</li>\n</ul>\n<p>默认连接长层级、客户端级和结果返回级、数据库级、表级、字段级都默认使用latin1字符集</p>\n","next":{"title":"Maven dependencies and included jars","link":"2019/11/03/Maven dependencies and included-jars"},"plink":"http://star.xrafece.com/2019/12/31/MySQL/","toc":[{"title":"常用SQL语句","id":"常用SQL语句","index":"1","children":[{"title":"数据库","id":"数据库","index":"1.1","children":[{"title":"创建数据库","id":"创建数据库","index":"1.1.1"},{"title":"删除数据库","id":"删除数据库","index":"1.1.2"},{"title":"查看数据库","id":"查看数据库","index":"1.1.3"},{"title":"使用数据库","id":"使用数据库","index":"1.1.4"}]},{"title":"数据表","id":"数据表","index":"1.2","children":[{"title":"查看数据表","id":"查看数据表","index":"1.2.1"},{"title":"创建数据表","id":"创建数据表","index":"1.2.2"},{"title":"删除数据表","id":"删除数据表","index":"1.2.3"},{"title":"查看数据表结构","id":"查看数据表结构","index":"1.2.4"}]},{"title":"数据操作","id":"数据操作","index":"1.3","children":[{"title":"新增（插入）数据","id":"新增（插入）数据","index":"1.3.1"},{"title":"修改（新增）数据","id":"修改（新增）数据","index":"1.3.2"},{"title":"删除数据","id":"删除数据","index":"1.3.3"},{"title":"查询数据","id":"查询数据","index":"1.3.4"}]}]},{"title":"MySQL基本语法要素","id":"MySQL基本语法要素","index":"2","children":[{"title":"字符集和标识符","id":"字符集和标识符","index":"2.1"}]}]}